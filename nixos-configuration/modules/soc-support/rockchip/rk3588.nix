{ config, lib, pkgs, pkgsChannels, nixosSystemConfig, ... }:

lib.mkIf (config.customOptions.socSupport.armSoc == "rk3588") {
  boot.initrd.availableKernelModules = [
    "3w-9xxx"
    "3w-xxxx"
    "9p"
    "9pnet_virtio"
    "aic79xx"
    "aic7xxx"
    "analogix-anx6345"
    "analogix-dp"
    "arcmsr"
    "axp20x-ac-power"
    "axp20x-battery"
    "dw-hdmi"
    "dw-mipi-dsi"
    "hpsa"
    "iso9660"
    "md_mod"
    "mp8859"
    "mptspi"
    "ohci1394"
    "overlay"
    "panel-simple"
    "pata_ali"
    "pata_amd"
    "pata_artop"
    "pata_atiixp"
    "pata_efar"
    "pata_hpt366"
    "pata_hpt37x"
    "pata_hpt3x2n"
    "pata_hpt3x3"
    "pata_it8213"
    "pata_it821x"
    "pata_jmicron"
    "pata_mpiix"
    "pata_netcell"
    "pata_ns87410"
    "pata_oldpiix"
    "pata_pcmcia"
    "pata_pdc2027x"
    "pata_qdi"
    "pata_rz1000"
    "pata_serverworks"
    "pata_sil680"
    "pata_sis"
    "pata_sl82c105"
    "pata_triflex"
    "pata_via"
    "pata_winbond"
    "pcie-brcmstb"
    "pcie-rockchip-host"
    "phy-rockchip-pcie"
    "pinctrl-axp209"
    "pwm-bl"
    "pwm-sun4i"
    "raid0"
    "raid1"
    "raid10"
    "raid456"
    "reset-raspberrypi"
    "rockchipdrm"
    "rockchip-rga"
    "sata_inic162x"
    "sata_promise"
    "sata_qstor"
    "sata_sil"
    "sata_sil24"
    "sata_svw"
    "sata_sx4"
    "sata_vsc"
    "sbp2"
    "sdhci_pci"
    "sun4i-drm"
    "sun8i-mixer"
    "vc4"
    "virtio_balloon"
    "virtio_blk"
    "virtio_console"
    "virtio_mmio"
    "virtio_net"
    "virtio_pci"
    "virtio_scsi"
    "vmxnet3"
    "vsock"
    "xhci-pci-renesas"
  ];
}
